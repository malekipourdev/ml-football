# پروژه تحلیل و طبقه‌بندی امتیازات بازیکنان فوتبال ⚽

## 📊 خلاصه پروژه

این پروژه یک تحلیل جامع از عملکرد بازیکنان فوتبال با استفاده از یادگیری ماشین است. هدف اصلی پروژه تبدیل امتیازات عددی بازیکنان به کلاس‌های کیفی و پیش‌بینی این کلاس‌ها با استفاده از ویژگی‌های عملکردی مختلف است.

## 🎯 اهداف پروژه

- **تحلیل داده‌های فوتبال**: بررسی عمیق مجموعه داده امتیازات بازیکنان
- **طبقه‌بندی هوشمند**: تبدیل امتیازات عددی به کلاس‌های کیفی
- **مقایسه الگوریتم‌ها**: ارزیابی عملکرد مدل‌های مختلف یادگیری ماشین
- **شناسایی عوامل مؤثر**: تعیین مهم‌ترین ویژگی‌های تأثیرگذار بر امتیاز بازیکنان

## 📁 ساختار پروژه

```
ml-football/
├── data/
│   └── data_football_ratings.csv          # مجموعه داده اصلی
├── notebookd/
│   ├── classification.ipynb               # تحلیل دسته بندی
│   ├── clustering.ipynb                   # تحلیل خوشه‌بندی
└── README.md                              # این فایل
```

## 📊 مجموعه داده

### مشخصات کلی

- **تعداد رکوردها**: 50,652 رکورد
- **تعداد ویژگی‌ها**: 63 ستون
- **بازه امتیازات**: 1.0 تا 10.0
- **منبع**: داده‌های واقعی عملکرد بازیکنان در مسابقات مختلف

### ویژگی‌های کلیدی

- **اطلاعات بازی**: مسابقه، تاریخ، تیم، موقعیت بازیکن
- **آمار تهاجمی**: گل، پاس گل، شوت، موقعیت گل
- **آمار دفاعی**: تکل، قطع توپ، مهار هوایی
- **آمار پاس**: پاس دقیق، پاس نادقیق، کراس
- **آمار انضباطی**: کارت زرد، کارت قرمز، خطا

## 🎯 طبقه‌بندی امتیازات

امتیازات بازیکنان به چهار کلاس کیفی تقسیم شده‌اند:

| کلاس    | بازه امتیاز | درصد  | تعداد  |
| ------- | ----------- | ----- | ------ |
| خیلی بد | 1.0 - 4.0   | 16.7% | 8,448  |
| بد      | 4.0 - 6.0   | 21.6% | 10,936 |
| خوب     | 6.0 - 8.0   | 57.0% | 28,858 |
| عالی    | 8.0 - 10.0  | 4.8%  | 2,410  |

## 🔍 تحلیل‌های انجام شده

### 1. تحلیل اکتشافی داده‌ها (EDA)

- بررسی توزیع امتیازات
- تحلیل مقادیر گمشده
- بررسی همبستگی بین ویژگی‌ها
- تصویرسازی الگوهای داده‌ها

### 2. پیش‌پردازش داده‌ها

- تمیزکاری داده‌ها
- رفع مقادیر گمشده
- نرمال‌سازی ویژگی‌ها
- انتخاب ویژگی‌های مناسب

### 3. مدل‌سازی یادگیری ماشین

هفت الگوریتم مختلف مورد بررسی قرار گرفته‌اند:

| مدل                   | دقت        | Precision | Recall    | F1-Score  |
| --------------------- | ---------- | --------- | --------- | --------- |
| **Gradient Boosting** | **58.55%** | **57.4%** | **58.6%** | **46.7%** |
| SVM                   | 58.24%     | 52.1%     | 58.2%     | 45.2%     |
| Logistic Regression   | 58.19%     | 52.1%     | 58.2%     | 46.1%     |
| K-Nearest Neighbors   | 51.69%     | 48.4%     | 51.7%     | 48.7%     |
| Random Forest         | 49.52%     | 47.4%     | 49.5%     | 48.2%     |
| Decision Tree         | 48.44%     | 47.5%     | 48.4%     | 47.7%     |
| Naive Bayes           | 34.98%     | 47.6%     | 35.0%     | 34.8%     |

## 🏆 نتایج و یافته‌ها

### بهترین مدل: Gradient Boosting

- **دقت کلی**: 58.55%
- **قوت اصلی**: تشخیص بهتر کلاس "خوب" (97% Recall)
- **ضعف اصلی**: تشخیص ضعیف کلاس‌های "خیلی بد" و "بد"

### مهم‌ترین ویژگی‌های تأثیرگذار

1. **گل (29.2%)**: مهم‌ترین عامل در تعیین امتیاز
2. **دقایق بازی (14.5%)**: زمان حضور در زمین
3. **تعداد لمس توپ (10.0%)**: میزان مشارکت در بازی
4. **پاس گل (7.9%)**: کیفیت پاس‌های حساس
5. **پاس‌های دقیق طولانی (6.3%)**: مهارت توزیع توپ

## 📈 تحلیل عملکرد

### نقاط قوت

- **دقت قابل قبول**: بیش از 58% دقت در تشخیص کلاس‌ها
- **تعمیم‌پذیری خوب**: عملکرد مناسب روی داده‌های آزمون
- **شناسایی الگوها**: تشخیص صحیح عوامل مؤثر بر عملکرد

### چالش‌ها

- **عدم تعادل کلاس‌ها**: غلبه کلاس "خوب" (57%)
- **تشخیص کلاس‌های حاشیه‌ای**: ضعف در تشخیص "خیلی بد" و "عالی"
- **پیچیدگی ویژگی‌ها**: تعامل پیچیده بین متغیرهای مختلف

## 🔧 فایل‌های نوت‌بوک

### 1. `player_rating_classification.ipynb` (نوت‌بوک اصلی)

**محتوا**: تحلیل کامل طبقه‌بندی امتیازات بازیکنان

- ✅ بارگیری و تحلیل اولیه داده‌ها
- ✅ تصویرسازی توزیع امتیازات
- ✅ ایجاد کلاس‌های هدف
- ✅ انتخاب و آماده‌سازی ویژگی‌ها
- ✅ تحلیل همبستگی
- ✅ آموزش 7 مدل مختلف
- ✅ مقایسه عملکرد مدل‌ها
- ✅ تحلیل اهمیت ویژگی‌ها
- ✅ نتیجه‌گیری و خلاصه نتایج

**ویژگی‌های منحصر به فرد**:

- کدهای انگلیسی برای استفاده بین‌المللی
- تحلیل جامع با 12 بخش مجزا
- تصویرسازی‌های حرفه‌ای
- ارزیابی دقیق مدل‌ها

### 2. `classification.ipynb` (نوت‌بوک تکمیلی)

**محتوا**: تحلیل‌های تکمیلی و بررسی جنبه‌های مختلف

- 📊 تحلیل عمیق‌تر ویژگی‌ها
- 🔍 بررسی تأثیر نوع ارزیاب (انسان/ماشین)
- 📈 تحلیل توزیع امتیازات بر اساس موقعیت
- 🎯 آزمایش روش‌های مختلف پیش‌پردازش

## 🛠️ نحوه اجرا

### پیش‌نیازها

```bash
# ایجاد محیط مجازی
python -m venv .venv
source .venv/bin/activate  # در لینوکس/مک
# .venv\Scripts\activate   # در ویندوز

# نصب کتابخانه‌ها
pip install pandas numpy scikit-learn matplotlib seaborn jupyter
```

### اجرای نوت‌بوک‌ها

```bash
# شروع Jupyter
jupyter notebook

# یا استفاده از Jupyter Lab
jupyter lab
```

### ترتیب اجرا

1. ابتدا `player_rating_classification.ipynb` را اجرا کنید
2. برای تحلیل‌های تکمیلی `classification.ipynb` را بررسی کنید

## 📊 نتیجه‌گیری علمی

### یافته‌های کلیدی

1. **گل بهترین شاخص عملکرد**: با 29.2% اهمیت، گل زدن مهم‌ترین عامل تعیین‌کننده امتیاز بازیکن است
2. **اهمیت زمان بازی**: بازیکنانی که بیشتر بازی می‌کنند، امتیازات بهتری دریافت می‌کنند
3. **مشارکت در بازی**: تعداد لمس توپ نشان‌دهنده میزان مشارکت و تأثیرگذاری است

### پیشنهادات آینده

- **بهبود مدل‌ها**: استفاده از تکنیک‌های پیشرفته‌تر مانند Deep Learning
- **تعادل کلاس‌ها**: اعمال روش‌های کاهش عدم تعادل (SMOTE, Random Undersampling)
- **Feature Engineering**: ایجاد ویژگی‌های ترکیبی جدید
- **تحلیل موقعیتی**: مدل‌سازی جداگانه برای هر موقعیت بازی

### کاربردهای عملی

- **ارزیابی بازیکنان**: سیستم خودکار امتیازدهی
- **انتقالات**: کمک به تصمیم‌گیری در خرید بازیکن
- **توسعه بازیکن**: شناسایی نقاط ضعف و قوت
- **تحلیل تاکتیکی**: بهینه‌سازی ترکیب تیم

## 📊 تحلیل تفصیلی نتایج مدل‌ها

### Gradient Boosting (بهترین مدل)

```
              precision    recall  f1-score   support
        بد       0.59      0.06      0.11      2187
       خوب       0.59      0.97      0.73      5772
   خیلی بد       0.28      0.02      0.03      1690
      عالی       0.57      0.32      0.41       482

    accuracy                           0.59     10131
   macro avg       0.51      0.34      0.32     10131
weighted avg       0.54      0.59      0.47     10131
```

**تفسیر نتایج**:

- مدل در تشخیص کلاس "خوب" بسیار قوی است (97% Recall)
- ضعف در تشخیص کلاس‌های نادر ("خیلی بد" و "عالی")
- دقت کلی 58.55% برای مسئله چهار کلاسه قابل قبول است

### مقایسه عملکرد در کلاس‌های مختلف

| کلاس    | تعداد نمونه   | Precision | Recall | توضیح            |
| ------- | ------------- | --------- | ------ | ---------------- |
| خوب     | 5,772 (57%)   | 59%       | 97%    | تشخیص عالی       |
| بد      | 2,187 (21.6%) | 59%       | 6%     | تشخیص ضعیف       |
| خیلی بد | 1,690 (16.7%) | 28%       | 2%     | تشخیص بسیار ضعیف |
| عالی    | 482 (4.8%)    | 57%       | 32%    | تشخیص متوسط      |

## 🎛️ تنظیمات مدل و پارامترها

### مدل‌های استفاده شده و تنظیمات

```python
models = {
    'Random Forest': RandomForestClassifier(n_estimators=100, random_state=42),
    'Gradient Boosting': GradientBoostingClassifier(n_estimators=100, random_state=42),
    'SVM': SVC(kernel='rbf', random_state=42),
    'Logistic Regression': LogisticRegression(random_state=42, max_iter=1000),
    'K-Nearest Neighbors': KNeighborsClassifier(n_neighbors=5),
    'Naive Bayes': GaussianNB(),
    'Decision Tree': DecisionTreeClassifier(random_state=42)
}
```

### ویژگی‌های انتخابی (36 ویژگی)

```python
numerical_features = [
    'goals', 'assists', 'shots_ontarget', 'shots_offtarget', 'shotsblocked',
    'chances2score', 'drib_success', 'drib_unsuccess', 'keypasses', 'touches',
    'passes_acc', 'passes_inacc', 'crosses_acc', 'crosses_inacc',
    'lballs_acc', 'lballs_inacc', 'grduels_w', 'grduels_l',
    'aerials_w', 'aerials_l', 'poss_lost', 'fouls', 'wasfouled',
    'clearances', 'stop_shots', 'interceptions', 'tackles', 'dribbled_past',
    'tballs_acc', 'tballs_inacc', 'ycards', 'rcards', 'dangmistakes',
    'countattack', 'offsides', 'minutesPlayed'
]
```

## 👥 مشارکت‌کنندگان

- **توسعه‌دهنده اصلی**: [malekipourdev](https://github.com/malekipourdev)
- **نوع پروژه**: پروژه تحصیلی/تحقیقاتی
- **زبان برنامه‌نویسی**: Python
- **کتابخانه‌های اصلی**: pandas, scikit-learn, matplotlib, seaborn

## 📝 مجوز

این پروژه تحت مجوز MIT منتشر شده است. برای اطلاعات بیشتر فایل LICENSE را مطالعه کنید.

## 📞 تماس

برای سوالات، پیشنهادات یا همکاری:

- **GitHub**: [@malekipourdev](https://github.com/malekipourdev)
- **پروژه**: [ml-football](https://github.com/malekipourdev/ml-football)

---

_آخرین به‌روزرسانی: سپتامبر 2025_
