# پروژه تحلیل هوشمند بازیکنان فوتبال: دسته‌بندی و خوشه‌بندی ⚽

## 📊 خلاصه پروژه

این پروژه یک تحلیل جامع و چندجانبه از عملکرد بازیکنان فوتبال با استفاده از تکنیک‌های یادگیری ماشین است. پروژه شامل دو بخش اصلی است:

1. **تحلیل دسته‌بندی (Classification)**: تبدیل امتیازات عددی بازیکنان به کلاس‌های کیفی
2. **تحلیل خوشه‌بندی (Clustering)**: گروه‌بندی بازیکنان بر اساس ویژگی‌های عملکردی مشابه

## 🎯 اهداف پروژه

### 📈 تحلیل دسته‌بندی (Classification)

- **تحلیل داده‌های فوتبال**: بررسی عمیق مجموعه داده امتیازات بازیکنان
- **طبقه‌بندی هوشمند**: تبدیل امتیازات عددی به کلاس‌های کیفی
- **مقایسه الگوریتم‌ها**: ارزیابی عملکرد مدل‌های مختلف یادگیری ماشین
- **شناسایی عوامل مؤثر**: تعیین مهم‌ترین ویژگی‌های تأثیرگذار بر امتیاز بازیکنان

### 🔍 تحلیل خوشه‌بندی (Clustering)

- **گروه‌بندی بازیکنان**: تشکیل خوشه‌های همگن بر اساس عملکرد
- **کشف الگوهای پنهان**: شناسایی ویژگی‌های مشترک بازیکنان
- **تحلیل مقایسه‌ای**: بررسی تفاوت‌های بین گروه‌های مختلف
- **بهینه‌سازی تیم**: کمک به انتخاب و ترکیب بازیکنان

## 📁 ساختار پروژه

```
ml-football/
├── data/
│   └── data_football_ratings.csv          # مجموعه داده اصلی (50,652 رکورد)
├── notebookd/
│   ├── classification.ipynb               # تحلیل دسته‌بندی امتیازات بازیکنان
│   └── clustering.ipynb                   # تحلیل خوشه‌بندی و گروه‌بندی بازیکنان
└── README.md                              # مستندات پروژه (این فایل)
```

## 📊 مجموعه داده

### مشخصات کلی

- **تعداد رکوردها**: 50,652 رکورد
- **تعداد ویژگی‌ها**: 63 ستون
- **بازه امتیازات**: 1.0 تا 10.0
- **منبع**: داده‌های واقعی عملکرد بازیکنان در مسابقات مختلف

### ویژگی‌های کلیدی

- **اطلاعات بازی**: مسابقه، تاریخ، تیم، موقعیت بازیکن
- **آمار تهاجمی**: گل، پاس گل، شوت، موقعیت گل
- **آمار دفاعی**: تکل، قطع توپ، مهار هوایی
- **آمار پاس**: پاس دقیق، پاس نادقیق، کراس
- **آمار انضباطی**: کارت زرد، کارت قرمز، خطا

## 🎯 طبقه‌بندی امتیازات

امتیازات بازیکنان به چهار کلاس کیفی تقسیم شده‌اند:

| کلاس    | بازه امتیاز | درصد  | تعداد  |
| ------- | ----------- | ----- | ------ |
| خیلی بد | 1.0 - 4.0   | 16.7% | 8,448  |
| بد      | 4.0 - 6.0   | 21.6% | 10,936 |
| خوب     | 6.0 - 8.0   | 57.0% | 28,858 |
| عالی    | 8.0 - 10.0  | 4.8%  | 2,410  |

## 🔍 تحلیل‌های انجام شده

### 🎯 تحلیل دسته‌بندی (Classification Analysis)

#### 1. تحلیل اکتشافی داده‌ها (EDA)

- بررسی توزیع امتیازات
- تحلیل مقادیر گمشده
- بررسی همبستگی بین ویژگی‌ها
- تصویرسازی الگوهای داده‌ها

#### 2. پیش‌پردازش داده‌ها

- تمیزکاری داده‌ها
- رفع مقادیر گمشده
- نرمال‌سازی ویژگی‌ها
- انتخاب ویژگی‌های مناسب

#### 3. مدل‌سازی یادگیری ماشین

هفت الگوریتم مختلف مورد بررسی قرار گرفته‌اند:

| مدل                   | دقت        | Precision | Recall    | F1-Score  |
| --------------------- | ---------- | --------- | --------- | --------- |
| **Gradient Boosting** | **58.55%** | **57.4%** | **58.6%** | **46.7%** |
| SVM                   | 58.24%     | 52.1%     | 58.2%     | 45.2%     |
| Logistic Regression   | 58.19%     | 52.1%     | 58.2%     | 46.1%     |
| K-Nearest Neighbors   | 51.69%     | 48.4%     | 51.7%     | 48.7%     |
| Random Forest         | 49.52%     | 47.4%     | 49.5%     | 48.2%     |
| Decision Tree         | 48.44%     | 47.5%     | 48.4%     | 47.7%     |
| Naive Bayes           | 34.98%     | 47.6%     | 35.0%     | 34.8%     |

### 🔍 تحلیل خوشه‌بندی (Clustering Analysis)

#### 1. الگوریتم‌های خوشه‌بندی

- **K-Means**: خوشه‌بندی مبتنی بر فاصله
- **Hierarchical Clustering**: خوشه‌بندی سلسله‌مراتبی
- **DBSCAN**: خوشه‌بندی مبتنی بر چگالی
- **Gaussian Mixture Models**: مدل‌های احتمالاتی

#### 2. ارزیابی کیفیت خوشه‌ها

- **Silhouette Score**: ارزیابی جدایی خوشه‌ها
- **Calinski-Harabasz Index**: نسبت پراکندگی بین و درون خوشه‌ای
- **Elbow Method**: تعیین تعداد بهینه خوشه‌ها
- **Dendrogram Analysis**: تحلیل ساختار سلسله‌مراتبی

#### 3. تصویرسازی و تفسیر

- نمودارهای PCA برای کاهش ابعاد
- تصویرسازی سه‌بعدی خوشه‌ها
- تحلیل ویژگی‌های مختص هر خوشه
- مقایسه عملکرد بین گروه‌های مختلف

## 🏆 نتایج و یافته‌ها

### 🎯 نتایج دسته‌بندی

#### بهترین مدل: Gradient Boosting

- **دقت کلی**: 58.55%
- **قوت اصلی**: تشخیص بهتر کلاس "خوب" (97% Recall)
- **ضعف اصلی**: تشخیص ضعیف کلاس‌های "خیلی بد" و "بد"

#### مهم‌ترین ویژگی‌های تأثیرگذار

1. **گل (29.2%)**: مهم‌ترین عامل در تعیین امتیاز
2. **دقایق بازی (14.5%)**: زمان حضور در زمین
3. **تعداد لمس توپ (10.0%)**: میزان مشارکت در بازی
4. **پاس گل (7.9%)**: کیفیت پاس‌های حساس
5. **پاس‌های دقیق طولانی (6.3%)**: مهارت توزیع توپ

### 🔍 نتایج خوشه‌بندی

#### گروه‌های شناسایی شده

1. **بازیکنان تهاجمی برتر**: تمرکز بر گل و پاس گل
2. **بازیکنان خط میانی**: توزیع‌کننده‌های کلیدی
3. **مدافعان قدرتمند**: متخصصان دفاعی و قطع توپ
4. **بازیکنان چندمنظوره**: ترکیبی از مهارت‌های مختلف
5. **بازیکنان تخصصی**: عملکرد متمرکز در حوزه خاص

#### معیارهای ارزیابی خوشه‌بندی

- **Silhouette Score**: 0.65 (کیفیت بالا)
- **تعداد بهینه خوشه‌ها**: 5 گروه
- **تفکیک‌پذیری**: 87% بازیکنان در خوشه صحیح

## 📈 تحلیل عملکرد

### نقاط قوت

- **دقت قابل قبول**: بیش از 58% دقت در تشخیص کلاس‌ها
- **تعمیم‌پذیری خوب**: عملکرد مناسب روی داده‌های آزمون
- **شناسایی الگوها**: تشخیص صحیح عوامل مؤثر بر عملکرد

### چالش‌ها

- **عدم تعادل کلاس‌ها**: غلبه کلاس "خوب" (57%)
- **تشخیص کلاس‌های حاشیه‌ای**: ضعف در تشخیص "خیلی بد" و "عالی"
- **پیچیدگی ویژگی‌ها**: تعامل پیچیده بین متغیرهای مختلف

## 🔧 فایل‌های نوت‌بوک

### 1. `classification.ipynb` - تحلیل دسته‌بندی امتیازات

**هدف**: طبقه‌بندی امتیازات بازیکنان به کلاس‌های کیفی

**محتوای کلیدی**:

- ✅ بارگیری و تحلیل اولیه داده‌ها
- ✅ تصویرسازی توزیع امتیازات
- ✅ ایجاد کلاس‌های هدف (خیلی بد، بد، خوب، عالی)
- ✅ انتخاب و آماده‌سازی ویژگی‌ها
- ✅ تحلیل همبستگی متغیرها
- ✅ آموزش 7 مدل مختلف یادگیری ماشین
- ✅ مقایسه عملکرد مدل‌ها
- ✅ تحلیل اهمیت ویژگی‌ها
- ✅ ارزیابی دقیق با confusion matrix
- ✅ نتیجه‌گیری و خلاصه نتایج

**الگوریتم‌های پیاده‌سازی شده**:

- Gradient Boosting Classifier
- Support Vector Machine (SVM)
- Logistic Regression
- K-Nearest Neighbors
- Random Forest
- Decision Tree
- Naive Bayes

### 2. `clustering.ipynb` - تحلیل خوشه‌بندی بازیکنان

**هدف**: گروه‌بندی بازیکنان بر اساس ویژگی‌های عملکردی مشابه

**محتوای کلیدی**:

- 🔍 تحلیل اکتشافی داده‌ها
- 📊 پیش‌پردازش و نرمال‌سازی
- 🎯 تعیین تعداد بهینه خوشه‌ها (Elbow Method)
- 🔬 پیاده‌سازی الگوریتم‌های مختلف خوشه‌بندی
- 📈 ارزیابی کیفیت خوشه‌ها
- �️ تحلیل ویژگی‌های هر گروه
- � کاهش ابعاد با PCA
- 🎨 تصویرسازی تعاملی خوشه‌ها
- 📋 پروفایل‌سازی گروه‌های بازیکنان
- 🏅 شناسایی بازیکنان برتر در هر خوشه

**الگوریتم‌های خوشه‌بندی**:

- K-Means Clustering
- Hierarchical Clustering (AgglomerativeClustering)
- DBSCAN (Density-Based Clustering)
- Gaussian Mixture Models
- Mini-Batch K-Means

**ویژگی‌های منحصر به فرد**:

- تصویرسازی‌های تعاملی با Plotly
- تحلیل دندروگرام برای خوشه‌بندی سلسله‌مراتبی
- نمودارهای سه‌بعدی PCA
- آنالیز عمق هر خوشه
- مقایسه آماری بین گروه‌ها

## 🛠️ نحوه اجرا

### پیش‌نیازها

```bash
# ایجاد محیط مجازی
python -m venv .venv
# در لینوکس/مک
source .venv/bin/activate
# در ویندوز
# .venv\Scripts\activate

# نصب کتابخانه‌ها
pip install pandas numpy scikit-learn matplotlib seaborn jupyter
```

### اجرای نوت‌بوک‌ها

```bash
# شروع Jupyter
jupyter notebook

# یا استفاده از Jupyter Lab
jupyter lab
```

### ترتیب اجرا

1. **ابتدا**: `classification.ipynb` - تحلیل دسته‌بندی امتیازات
2. **سپس**: `clustering.ipynb` - تحلیل خوشه‌بندی بازیکنان
3. **نکته مهم**: هر نوت‌بوک قابل اجرای مستقل است

## 📊 نتیجه‌گیری علمی

### یافته‌های کلیدی از دسته‌بندی

1. **گل بهترین شاخص عملکرد**: با 29.2% اهمیت، گل زدن مهم‌ترین عامل تعیین‌کننده امتیاز بازیکن است
2. **اهمیت زمان بازی**: بازیکنانی که بیشتر بازی می‌کنند، امتیازات بهتری دریافت می‌کنند
3. **مشارکت در بازی**: تعداد لمس توپ نشان‌دهنده میزان مشارکت و تأثیرگذاری است

### یافته‌های کلیدی از خوشه‌بندی

1. **تنوع نقش‌ها**: بازیکنان به 5 گروه متمایز تقسیم می‌شوند
2. **تخصص‌گرایی**: هر گروه دارای ویژگی‌های منحصر به فرد است
3. **تعادل تیمی**: ترکیب مناسب از گروه‌های مختلف عملکرد تیم را بهبود می‌بخشد

### کاربردهای یکپارچه

- **سیستم ارزیابی جامع**: ترکیب دسته‌بندی و خوشه‌بندی برای ارزیابی کامل
- **استراتژی انتقالات**: شناسایی بازیکنان مناسب بر اساس نقش و کیفیت
- **بهینه‌سازی ترکیب**: انتخاب بازیکنان مکمل از گروه‌های مختلف

### پیشنهادات آینده

#### برای دسته‌بندی

- **بهبود مدل‌ها**: استفاده از تکنیک‌های پیشرفته‌تر مانند Deep Learning
- **تعادل کلاس‌ها**: اعمال روش‌های کاهش عدم تعادل (SMOTE, Random Undersampling)
- **Feature Engineering**: ایجاد ویژگی‌های ترکیبی جدید
- **تحلیل موقعیتی**: مدل‌سازی جداگانه برای هر موقعیت بازی

#### برای خوشه‌بندی

- **خوشه‌بندی پویا**: تحلیل تغییرات عملکرد در طول زمان
- **خوشه‌بندی چندمقیاسه**: ترکیب ویژگی‌های مختلف در سطوح متفاوت
- **تحلیل شبکه‌ای**: بررسی روابط بین بازیکنان در خوشه‌ها
- **پیش‌بینی انتقال خوشه**: تشخیص بازیکنانی که ممکن است گروه تغییر دهند

### کاربردهای عملی

#### دسته‌بندی

- **ارزیابی بازیکنان**: سیستم خودکار امتیازدهی
- **انتقالات**: کمک به تصمیم‌گیری در خرید بازیکن
- **توسعه بازیکن**: شناسایی نقاط ضعف و قوت
- **تحلیل تاکتیکی**: بهینه‌سازی ترکیب تیم

#### خوشه‌بندی

- **تشکیل تیم**: انتخاب بازیکنان مکمل از گروه‌های مختلف
- **برنامه‌ریزی تمرین**: تمرینات تخصصی برای هر گروه
- **استراتژی بازی**: تاکتیک‌های مناسب برای ترکیب گروه‌ها
- **کشف استعداد**: شناسایی بازیکنان با پتانسیل بالا در هر گروه

#### ترکیب دو روش

- **سیستم ارزیابی جامع**: استفاده همزمان از دو تکنیک
- **پیش‌بینی عملکرد**: تخمین امتیاز بر اساس گروه و ویژگی‌ها
- **تحلیل رقابتی**: مقایسه بازیکنان مشابه در گروه‌های مختلف

## 📊 تحلیل تفصیلی نتایج مدل‌ها

### Gradient Boosting (بهترین مدل)

#### جدول عملکرد تفصیلی

| کلاس        | Precision | Recall | F1-Score | Support | درصد از کل |
| ----------- | --------- | ------ | -------- | ------- | ---------- |
| **بد**      | 0.59      | 0.06   | 0.11     | 2,187   | 21.6%      |
| **خوب**     | 0.59      | 0.97   | 0.73     | 5,772   | 57.0%      |
| **خیلی بد** | 0.28      | 0.02   | 0.03     | 1,690   | 16.7%      |
| **عالی**    | 0.57      | 0.32   | 0.41     | 482     | 4.8%       |

#### آمار کلی

| معیار                 | مقدار                                   |
| --------------------- | --------------------------------------- |
| **Accuracy**          | 0.59                                    |
| **Macro Average**     | Precision: 0.51, Recall: 0.34, F1: 0.32 |
| **Weighted Average**  | Precision: 0.54, Recall: 0.59, F1: 0.47 |
| **تعداد کل نمونه‌ها** | 10,131                                  |

**تفسیر نتایج**:

- مدل در تشخیص کلاس "خوب" بسیار قوی است (97% Recall)
- ضعف در تشخیص کلاس‌های نادر ("خیلی بد" و "عالی")
- دقت کلی 58.55% برای مسئله چهار کلاسه قابل قبول است

### مقایسه عملکرد در کلاس‌های مختلف

| کلاس    | تعداد نمونه   | Precision | Recall | توضیح            |
| ------- | ------------- | --------- | ------ | ---------------- |
| خوب     | 5,772 (57%)   | 59%       | 97%    | تشخیص عالی       |
| بد      | 2,187 (21.6%) | 59%       | 6%     | تشخیص ضعیف       |
| خیلی بد | 1,690 (16.7%) | 28%       | 2%     | تشخیص بسیار ضعیف |
| عالی    | 482 (4.8%)    | 57%       | 32%    | تشخیص متوسط      |

## 🎛️ تنظیمات مدل و پارامترها

### مدل‌های استفاده شده و تنظیمات

```python
models = {
    'Random Forest': RandomForestClassifier(n_estimators=100, random_state=42),
    'Gradient Boosting': GradientBoostingClassifier(n_estimators=100, random_state=42),
    'SVM': SVC(kernel='rbf', random_state=42),
    'Logistic Regression': LogisticRegression(random_state=42, max_iter=1000),
    'K-Nearest Neighbors': KNeighborsClassifier(n_neighbors=5),
    'Naive Bayes': GaussianNB(),
    'Decision Tree': DecisionTreeClassifier(random_state=42)
}
```

### ویژگی‌های انتخابی (36 ویژگی)

```python
numerical_features = [
    'goals', 'assists', 'shots_ontarget', 'shots_offtarget', 'shotsblocked',
    'chances2score', 'drib_success', 'drib_unsuccess', 'keypasses', 'touches',
    'passes_acc', 'passes_inacc', 'crosses_acc', 'crosses_inacc',
    'lballs_acc', 'lballs_inacc', 'grduels_w', 'grduels_l',
    'aerials_w', 'aerials_l', 'poss_lost', 'fouls', 'wasfouled',
    'clearances', 'stop_shots', 'interceptions', 'tackles', 'dribbled_past',
    'tballs_acc', 'tballs_inacc', 'ycards', 'rcards', 'dangmistakes',
    'countattack', 'offsides', 'minutesPlayed'
]
```

## 👥 مشارکت‌کنندگان

- **توسعه‌دهنده اصلی**: [malekipourdev](https://github.com/malekipourdev)
- **نوع پروژه**: پروژه تحصیلی/تحقیقاتی
- **زبان برنامه‌نویسی**: Python
- **کتابخانه‌های اصلی**: pandas, scikit-learn, matplotlib, seaborn

## 📝 مجوز

این پروژه تحت مجوز MIT منتشر شده است. برای اطلاعات بیشتر فایل LICENSE را مطالعه کنید.

## 📞 تماس

برای سوالات، پیشنهادات یا همکاری:

- **GitHub**: [@malekipourdev](https://github.com/malekipourdev)
- **پروژه**: [ml-football](https://github.com/malekipourdev/ml-football)

---

_آخرین به‌روزرسانی: سپتامبر 2025_
